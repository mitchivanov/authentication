# Доменный слой

## Описание

Доменный слой - сердце приложения, где находится бизнес-логика и правила. Этот слой не зависит от инфраструктуры, фреймворков или конкретных технологий и определяет основные сущности системы и правила их взаимодействия.

## Структура

```
domain/
│
├── models/              # Модели домена (бизнес-объекты)
│   ├── user.py          # Модель пользователя
│   └── ...              # Другие модели
│
├── schemas/             # Схемы для валидации данных
│   ├── user.py          # Схемы для работы с пользователями
│   ├── auth.py          # Схемы для аутентификации/авторизации
│   └── ...              # Другие схемы
│
└── services/            # Доменные сервисы (опционально)
    └── ...              # Логика, не привязанная к конкретной модели
```

## Концепции

### Модели домена

Модели домена представляют основные бизнес-объекты системы и содержат:

1. **Атрибуты** - данные, характеризующие сущность
2. **Методы** - бизнес-логика, связанная с сущностью
3. **Инварианты** - бизнес-правила, которые всегда должны соблюдаться

Пример: модель `User` содержит логику расчета возраста, проверки совершеннолетия и бизнес-правила для операций со счетом.

### Схемы

Схемы используются для валидации входных и выходных данных. Они определяют:

1. **Структуру данных** - требуемые и опциональные поля
2. **Правила валидации** - форматы, ограничения, зависимости между полями
3. **Примеры использования** - для документации API

## Отличие от моделей ОРМ

Важно различать:

- **Модели домена** - отражают бизнес-понятия и правила
- **Модели ОРМ** - отражают структуру таблиц в базе данных

В нашем случае мы используем гибридный подход, где модели домена также являются моделями SQLAlchemy, но это не обязательно. В более сложных проектах эти концепции могут быть разделены.

## Преимущества

1. **Изоляция бизнес-логики** - независимость от конкретных технологий
2. **Улучшенная тестируемость** - легко писать модульные тесты
3. **Ясность намерений** - код отражает бизнес-термины и процессы
4. **Гибкость архитектуры** - можно легко заменить слои инфраструктуры 